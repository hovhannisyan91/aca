---
title: "Intro to Relational Databases"
subtitle: "Data Analysis With SQL"
author: "Karen Hovhannisyan"
date: last-modified
format:
  revealjs: 
    touch: true
    slide-number: false
    chalkboard: true

    preview-links: auto
    width: 1500
    transition: slide
    logo: ../../../img/favicon.png
    footer: "<a href=\"../session01.qmd\">Back to chapter</a>"
    # css: ../../../reveal_styles.css
    include-in-header:
      - text: |
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
          <style>
            .icon-xxl { font-size: 84px; }
            .icon-xl  { font-size: 64px; }
            .icon-lg  { font-size: 48px; }
            .muted { opacity: .8 }
            .pill { border-radius: 10px; }
            .circle { border-radius: 50%; }
          </style>
---

## Learning Goals {.smaller}

- Understand what a database is and why it is essential for analytics
- Distinguish between relational and non-relational databases
- Understand the role of OLAP systems and RDBMS in analytics workflows
- Explain differences between Data Warehouse, Data Mart, Data Lake, and Data Lakehouse
- Build and run a local PostgreSQL database using **Docker**


## Where SQL Fits in Data Analytics {.smaller}

SQL sits at the **core of the analytics stack**

- **Used to interact with:**
  - operational databases
  - data warehouses
  - data lakes and lakehouses

. . .

- **Almost every analytics tool relies on SQL:**
  - BI tools (Tableau, Power BI)
  - Machine learning feature pipelines
  - Python/R analytics workflows

. . .

- **Mastering SQL enables you to:**
  - ask better questions
  - access data independently
  - scale your analytical work


## What Is a Database? {.smaller}


- A database is a **structured collection of data** stored electronically

- **Data is organized into:**
  - tables
  - rows
  - columns

- A database is managed by a **Database Management System (DBMS)**

- **The DBMS is responsible for:**
  - storing data
  - retrieving data efficiently
  - enforcing rules and constraints
  - supporting multiple users concurrently

## Why Databases Are Not Excel {.smaller}

- Spreadsheets are designed for **individual, ad-hoc analysis**
- Databases are designed for **shared, institutional data use**

. . .

- **Key limitations of spreadsheets:**
  - entire dataset loaded into memory
  - poor performance at scale
  - weak support for concurrent users

. . .

- **Databases provide:**
  - efficient data access
  - concurrency control
  - reliability and consistency at scale


## Types of Data {.smaller}

In analytics, data is categorized by **how it is structured**

- **The structure determines:**
  - how data is stored
  - how it is queried
  - which tools can process it efficiently

- **Three major categories:**
  - structured data
  - unstructured data
  - semi-structured data

>Databases and analytics systems are designed differently for each type


## Types of Data: Visual Overview {.smaller}

::: {.columns}
::: {.column width="33%"}

<svg viewBox="0 0 220 140" width="100%" aria-label="Structured data grid">
  <rect x="10" y="10" width="200" height="120" rx="8" fill="#f7f9fc" stroke="#1f4b99" stroke-width="3"/>
  <line x1="10" y1="50" x2="210" y2="50" stroke="#1f4b99" stroke-width="3"/>
  <line x1="10" y1="85" x2="210" y2="85" stroke="#b7c6e2" stroke-width="2"/>
  <line x1="10" y1="110" x2="210" y2="110" stroke="#b7c6e2" stroke-width="2"/>
  <line x1="70" y1="10" x2="70" y2="130" stroke="#b7c6e2" stroke-width="2"/>
  <line x1="135" y1="10" x2="135" y2="130" stroke="#b7c6e2" stroke-width="2"/>
  <text x="20" y="38" font-family="Arial" font-size="14" fill="#1f4b99">ID</text>
  <text x="80" y="38" font-family="Arial" font-size="14" fill="#1f4b99">Name</text>
  <text x="145" y="38" font-family="Arial" font-size="14" fill="#1f4b99">City</text>
  <text x="20" y="74" font-family="Arial" font-size="13" fill="#345375">1</text>
  <text x="80" y="74" font-family="Arial" font-size="13" fill="#345375">Maria</text>
  <text x="145" y="74" font-family="Arial" font-size="13" fill="#345375">Oslo</text>
  <text x="20" y="100" font-family="Arial" font-size="13" fill="#345375">2</text>
  <text x="80" y="100" font-family="Arial" font-size="13" fill="#345375">Nick</text>
  <text x="145" y="100" font-family="Arial" font-size="13" fill="#345375">Berlin</text>
</svg>
:::
::: {.column width="33%"}


<svg viewBox="0 0 220 140" width="100%" aria-label="Unstructured data notes">
  <rect x="15" y="10" width="190" height="120" rx="10" fill="#fff7ed" stroke="#c05c2d" stroke-width="3"/>
  <path d="M30 40 Q70 25 110 44 T190 46" fill="none" stroke="#c05c2d" stroke-width="3"/>
  <path d="M30 68 Q65 80 100 64 T190 68" fill="none" stroke="#e38a54" stroke-width="2"/>
  <path d="M30 90 Q75 105 120 86 T190 92" fill="none" stroke="#e38a54" stroke-width="2"/>
  <path d="M30 112 Q55 95 95 118 T190 118" fill="none" stroke="#c05c2d" stroke-width="3"/>
  <text x="28" y="30" font-family="Arial" font-size="12" fill="#c05c2d">photos, chats, mp3...</text>
</svg>
:::
::: {.column width="34%"}
<svg viewBox="0 0 220 140" width="100%" aria-label="Semi-structured data tags">
  <rect x="10" y="12" width="200" height="116" rx="10" fill="#eef8f2" stroke="#2d814d" stroke-width="3"/>
  <rect x="22" y="26" width="176" height="30" rx="6" fill="#d6f1df" stroke="#2d814d" stroke-width="2"/>
  <text x="34" y="46" font-family="Arial" font-size="13" fill="#2d814d">&lt;user id="1001"&gt;</text>
  <rect x="22" y="66" width="176" height="26" rx="6" fill="#d6f1df" stroke="#2d814d" stroke-width="2"/>
  <text x="34" y="83" font-family="Arial" font-size="13" fill="#2d814d">"name": "Maria"</text>
  <rect x="22" y="100" width="176" height="22" rx="6" fill="#d6f1df" stroke="#2d814d" stroke-width="2"/>
  <text x="34" y="115" font-family="Arial" font-size="13" fill="#2d814d">"roles": ["admin"]</text>
</svg>
:::
:::

# Types of Databases {.smaller}

## Types of Databases {.smaller}

- **Relational Databases**
  - Table-based, fixed schema
  - Queried using SQL

. . .

- **NoSQL Databases**
  - Flexible schema
  - Designed for scalability and distributed systems

. . .

- **Graph Databases**
  - Nodes and relationships
  - Optimized for connected data


## Relational Databases {.smaller}

![](../../../img/sql/rdbms.png){width="85%"}


## NoSQL Databases {.smaller}

![](../../../img/sql/document.png){width="85%"}

## OLAP Systems {.smaller}

- Optimized for **analytics and reporting**
- Read-heavy workloads
- Large historical datasets
- Complex queries and aggregations

![](../../../img/sql/OLAP.png){width="80%"}


## Graph Databases {.smaller}

![](../../../img/sql/graphdb.png){width="85%"}


## OLTP Systems {.smaller}

- Optimized for **real-time transactions**
- Write-heavy workloads
- Many small, fast operations
- Strong consistency (ACID)

![](../../../img/sql/OLTP.png){width="80%"}


## ACID Transactions {.smaller}


- **Atomicity:** all operations succeed or none do  
- **Consistency:** database moves from one valid state to another  
- **Isolation:** concurrent transactions do not interfere  
- **Durability:** committed data is not lost  



## BASE Systems {.smaller}


- **Basically Available**
- **Soft state**
- **Eventually consistent**

- Used mainly in **distributed NoSQL systems**
- Favors **availability** over immediate consistency
- Temporary inconsistencies are acceptable
- Data becomes consistent **eventually**


## The CAP Theorem {.smaller}


- Applies to **distributed systems**
- A system cannot guarantee all three at the same time:
  - **Consistency**
  - **Availability**
  - **Partition Tolerance**
- During a network partition: the system must choose between **Consistency** and **Availability**
- Explains trade-offs in large-scale distributed databases

## OLAP vs OLTP Summary {.smaller}

![](../../../img/sql/OLAPvsOLTP.png){width="85%"}


## Centralized Databases {.smaller}

![](../../../img/sql/centralized_vs_distributed.png){width="85%"}


## Distributed Databases {.smaller}

![](../../../img/sql/centralized_vs_distributed.png){width="85%"}

# Data Management Architectures

## Data Management Architectures {.smaller}


- Data Warehouse (DW)
- Data Mart (DM)
- Data Lake (DL)
- Data Lakehouse (DLH)



## Data Warehouse (DW) {.smaller}

![](../../../img/sql/dw.png){width="85%"}



## Data Mart (DM) {.smaller}

![](../../../img/sql/dm.png){width="85%"}



## Data Lake (DL) {.smaller}

![](../../../img/sql/dl.png){width="85%"}



## Data Lakehouse (DLH) {.smaller}

![](../../../img/sql/dlh.png){width="85%"}



## Data Management Architectures â€” Summary {.smaller}


- **DW:** governed, structured, BI-focused
- **DM:** domain-specific slice of DW
- **DL:** raw, flexible, ML-oriented storage
- **DLH:** unified DW + DL with ACID guarantees


# Intro to SQL 

## Intro to SQL {.smaller}

- **SQL (Structured Query Language)**  
  - Developed by **IBM** (1970s)  
  - Public release: **1979**  
  - Standardized by **ANSI**

- Primary language for **relational databases**

- Used for:
  - manipulating data
  - querying data
  - defining database structures


# Building a Local PostgreSQL Database with Docker {.smaller}


