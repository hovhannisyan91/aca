<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>SQL Session 02: DRAFT – Data Analytics Bootcamp</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../img/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-707d8167ce6003fca903bfe2be84ab7f.css" rel="stylesheet" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" class="quarto-color-scheme-extra" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-0b37c64f34216b628666a8dac638b53b.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark-b6871152dc33c25e97e10f79624f84be.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/bootstrap/bootstrap-0b37c64f34216b628666a8dac638b53b.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme-extra" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light"><script id="quarto-html-before-body" type="application/javascript">
    const toggleBodyColorMode = (bsSheetEl) => {
      const mode = bsSheetEl.getAttribute("data-mode");
      const bodyEl = window.document.querySelector("body");
      if (mode === "dark") {
        bodyEl.classList.add("quarto-dark");
        bodyEl.classList.remove("quarto-light");
      } else {
        bodyEl.classList.add("quarto-light");
        bodyEl.classList.remove("quarto-dark");
      }
    }
    const toggleBodyColorPrimary = () => {
      const bsSheetEl = window.document.querySelector("link#quarto-bootstrap:not([rel=disabled-stylesheet])");
      if (bsSheetEl) {
        toggleBodyColorMode(bsSheetEl);
      }
    }
    const setColorSchemeToggle = (alternate) => {
      const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
      for (let i=0; i < toggles.length; i++) {
        const toggle = toggles[i];
        if (toggle) {
          if (alternate) {
            toggle.classList.add("alternate");
          } else {
            toggle.classList.remove("alternate");
          }
        }
      }
    };
    const toggleColorMode = (alternate) => {
      // Switch the stylesheets
      const primaryStylesheets = window.document.querySelectorAll('link.quarto-color-scheme:not(.quarto-color-alternate)');
      const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
      manageTransitions('#quarto-margin-sidebar .nav-link', false);
      if (alternate) {
        // note: dark is layered on light, we don't disable primary!
        enableStylesheet(alternateStylesheets);
        for (const sheetNode of alternateStylesheets) {
          if (sheetNode.id === "quarto-bootstrap") {
            toggleBodyColorMode(sheetNode);
          }
        }
      } else {
        disableStylesheet(alternateStylesheets);
        enableStylesheet(primaryStylesheets)
        toggleBodyColorPrimary();
      }
      manageTransitions('#quarto-margin-sidebar .nav-link', true);
      // Switch the toggles
      setColorSchemeToggle(alternate)
      // Hack to workaround the fact that safari doesn't
      // properly recolor the scrollbar when toggling (#1455)
      if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
        manageTransitions("body", false);
        window.scrollTo(0, 1);
        setTimeout(() => {
          window.scrollTo(0, 0);
          manageTransitions("body", true);
        }, 40);
      }
    }
    const disableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        stylesheet.rel = 'disabled-stylesheet';
      }
    }
    const enableStylesheet = (stylesheets) => {
      for (let i=0; i < stylesheets.length; i++) {
        const stylesheet = stylesheets[i];
        if(stylesheet.rel !== 'stylesheet') { // for Chrome, which will still FOUC without this check
          stylesheet.rel = 'stylesheet';
        }
      }
    }
    const manageTransitions = (selector, allowTransitions) => {
      const els = window.document.querySelectorAll(selector);
      for (let i=0; i < els.length; i++) {
        const el = els[i];
        if (allowTransitions) {
          el.classList.remove('notransition');
        } else {
          el.classList.add('notransition');
        }
      }
    }
    const isFileUrl = () => {
      return window.location.protocol === 'file:';
    }
    const hasAlternateSentinel = () => {
      let styleSentinel = getColorSchemeSentinel();
      if (styleSentinel !== null) {
        return styleSentinel === "alternate";
      } else {
        return false;
      }
    }
    const setStyleSentinel = (alternate) => {
      const value = alternate ? "alternate" : "default";
      if (!isFileUrl()) {
        window.localStorage.setItem("quarto-color-scheme", value);
      } else {
        localAlternateSentinel = value;
      }
    }
    const getColorSchemeSentinel = () => {
      if (!isFileUrl()) {
        const storageValue = window.localStorage.getItem("quarto-color-scheme");
        return storageValue != null ? storageValue : localAlternateSentinel;
      } else {
        return localAlternateSentinel;
      }
    }
    const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
      const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
      const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
      let newTheme = '';
      if(authorPrefersDark) {
        newTheme = isAlternate ? baseTheme : alternateTheme;
      } else {
        newTheme = isAlternate ? alternateTheme : baseTheme;
      }
      const changeGiscusTheme = () => {
        // From: https://github.com/giscus/giscus/issues/336
        const sendMessage = (message) => {
          const iframe = document.querySelector('iframe.giscus-frame');
          if (!iframe) return;
          iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
        }
        sendMessage({
          setConfig: {
            theme: newTheme
          }
        });
      }
      const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
      if (isGiscussLoaded) {
        changeGiscusTheme();
      }
    };
    const authorPrefersDark = false;
    const darkModeDefault = authorPrefersDark;
      document.querySelector('link#quarto-text-highlighting-styles.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
      document.querySelector('link#quarto-bootstrap.quarto-color-scheme-extra').rel = 'disabled-stylesheet';
    let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
    // Dark / light mode switch
    window.quartoToggleColorScheme = () => {
      // Read the current dark / light value
      let toAlternate = !hasAlternateSentinel();
      toggleColorMode(toAlternate);
      setStyleSentinel(toAlternate);
      toggleGiscusIfUsed(toAlternate, darkModeDefault);
      window.dispatchEvent(new Event('resize'));
    };
    // Switch to dark mode if need be
    if (hasAlternateSentinel()) {
      toggleColorMode(true);
    } else {
      toggleColorMode(false);
    }
  </script>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../img/favicon.png" alt="" class="navbar-logo light-content">
    <img src="../../img/favicon.png" alt="" class="navbar-logo dark-content">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Data Analytics Bootcamp</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../../materials/syllabus.html" aria-current="page"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../materials/statistics/index.html"> 
<span class="menu-text">Statistical Thinking</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../materials/sql/index.html"> 
<span class="menu-text">SQL</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../materials/python/index.html"> 
<span class="menu-text">Python</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../materials/tableau/index.html"> 
<span class="menu-text">Tableau</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../materials/lab/index.html"> 
<span class="menu-text">Lab</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/hovhannisyan91"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../materials/sql/index.html">SQL</a></li><li class="breadcrumb-item"><a href="../../materials/sql/index.html">SQL</a></li><li class="breadcrumb-item"><a href="../../materials/sql/session3.html">SQL Session 02: DRAFT</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="../../index.html" class="sidebar-logo-link">
      </a>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../materials/statistics/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistical Thinking</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../materials/statistics/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistics</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/statistics/session1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistics Session 01: Descriptive Stats</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/statistics/session2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistics Session 02: Data Types</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/statistics/session3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistics Session 03: Inference Essentials</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/statistics/session4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistics Session 04: Inference Essentials</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Slides</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/statistics/slides/intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/statistics/slides/week1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/statistics/slides/week2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/statistics/slides/week3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/statistics/slides/week4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../materials/sql/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SQL</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../materials/sql/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SQL</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/sql/session1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SQL Session 01: Intro to Relational Databases</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/sql/session2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">SQL Session 02: Intro to PostgreSQL</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/sql/session3.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">SQL Session 02: DRAFT</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false">
 <span class="menu-text">Slides</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/sql/slides/week1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst | Week 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/sql/slides/week2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst | Week 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/sql/slides/week3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/sql/slides/week4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/sql/slides/week5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/sql/slides/week6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../materials/python/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../materials/python/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/python/session1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Python Session 01: Coming Soon</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="false">
 <span class="menu-text">Slides</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/python/slides/week1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/python/slides/week2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/python/slides/week3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/python/slides/week4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/python/slides/week5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/python/slides/week6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/python/slides/week7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../materials/tableau/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tableau</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../materials/tableau/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tableau</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth2 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/tableau/session1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tableau Session 01: Introduction To Tableau</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/tableau/session2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tableau Session 02:</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/tableau/session3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tableau Session 03:</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/tableau/session4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tableau Session 04: Dashboard Design &amp; Performance</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="false">
 <span class="menu-text">Slides</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/tableau/slides/week1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/tableau/slides/week2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/tableau/slides/week3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../materials/tableau/slides/week4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Analyst</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#behind-the-scenes" id="toc-behind-the-scenes" class="nav-link active" data-scroll-target="#behind-the-scenes">Behind the Scenes</a>
  <ul class="collapse">
  <li><a href="#sql-as-a-declarative-language" id="toc-sql-as-a-declarative-language" class="nav-link" data-scroll-target="#sql-as-a-declarative-language">SQL as a Declarative Language</a></li>
  <li><a href="#example-declarative-query" id="toc-example-declarative-query" class="nav-link" data-scroll-target="#example-declarative-query">Example: Declarative Query</a></li>
  <li><a href="#query-optimization-happens-automatically" id="toc-query-optimization-happens-automatically" class="nav-link" data-scroll-target="#query-optimization-happens-automatically">Query Optimization Happens Automatically</a></li>
  <li><a href="#why-this-matters-for-data-analysts" id="toc-why-this-matters-for-data-analysts" class="nav-link" data-scroll-target="#why-this-matters-for-data-analysts">Why This Matters for Data Analysts</a></li>
  </ul></li>
  <li><a href="#query-plan" id="toc-query-plan" class="nav-link" data-scroll-target="#query-plan">Query Plan</a>
  <ul class="collapse">
  <li><a href="#what-is-a-query-plan" id="toc-what-is-a-query-plan" class="nav-link" data-scroll-target="#what-is-a-query-plan">What Is a Query Plan?</a></li>
  <li><a href="#generating-a-query-plan" id="toc-generating-a-query-plan" class="nav-link" data-scroll-target="#generating-a-query-plan">Generating a Query Plan</a></li>
  <li><a href="#interpreting-a-simple-query-plan" id="toc-interpreting-a-simple-query-plan" class="nav-link" data-scroll-target="#interpreting-a-simple-query-plan">Interpreting a Simple Query Plan</a></li>
  <li><a href="#why-query-plans-matter-for-data-analysts" id="toc-why-query-plans-matter-for-data-analysts" class="nav-link" data-scroll-target="#why-query-plans-matter-for-data-analysts">Why Query Plans Matter for Data Analysts</a></li>
  </ul></li>
  <li><a href="#refining-your-sql-queries" id="toc-refining-your-sql-queries" class="nav-link" data-scroll-target="#refining-your-sql-queries">Refining Your SQL Queries</a>
  <ul class="collapse">
  <li><a href="#revisiting-select" id="toc-revisiting-select" class="nav-link" data-scroll-target="#revisiting-select">Revisiting SELECT</a></li>
  <li><a href="#example-selecting-specific-columns" id="toc-example-selecting-specific-columns" class="nav-link" data-scroll-target="#example-selecting-specific-columns">Example: Selecting Specific Columns</a></li>
  <li><a href="#why-column-selection-matters" id="toc-why-column-selection-matters" class="nav-link" data-scroll-target="#why-column-selection-matters">Why Column Selection Matters</a></li>
  <li><a href="#whats-next" id="toc-whats-next" class="nav-link" data-scroll-target="#whats-next">What’s Next?</a></li>
  </ul></li>
  <li><a href="#order-by" id="toc-order-by" class="nav-link" data-scroll-target="#order-by">ORDER BY</a>
  <ul class="collapse">
  <li><a href="#basic-order-by-syntax" id="toc-basic-order-by-syntax" class="nav-link" data-scroll-target="#basic-order-by-syntax">Basic ORDER BY Syntax</a></li>
  <li><a href="#example-sorting-text-data" id="toc-example-sorting-text-data" class="nav-link" data-scroll-target="#example-sorting-text-data">Example: Sorting Text Data</a></li>
  <li><a href="#example-sorting-numeric-data" id="toc-example-sorting-numeric-data" class="nav-link" data-scroll-target="#example-sorting-numeric-data">Example: Sorting Numeric Data</a></li>
  <li><a href="#sorting-by-multiple-columns" id="toc-sorting-by-multiple-columns" class="nav-link" data-scroll-target="#sorting-by-multiple-columns">Sorting by Multiple Columns</a></li>
  <li><a href="#key-points-to-remember" id="toc-key-points-to-remember" class="nav-link" data-scroll-target="#key-points-to-remember">Key Points to Remember</a></li>
  </ul></li>
  <li><a href="#limit" id="toc-limit" class="nav-link" data-scroll-target="#limit">LIMIT</a>
  <ul class="collapse">
  <li><a href="#basic-limit-syntax" id="toc-basic-limit-syntax" class="nav-link" data-scroll-target="#basic-limit-syntax">Basic LIMIT Syntax</a></li>
  <li><a href="#example-limiting-sorted-results" id="toc-example-limiting-sorted-results" class="nav-link" data-scroll-target="#example-limiting-sorted-results">Example: Limiting Sorted Results</a></li>
  <li><a href="#important-notes-about-limit" id="toc-important-notes-about-limit" class="nav-link" data-scroll-target="#important-notes-about-limit">Important Notes About LIMIT</a></li>
  <li><a href="#database-compatibility-note" id="toc-database-compatibility-note" class="nav-link" data-scroll-target="#database-compatibility-note">Database Compatibility Note</a></li>
  </ul></li>
  <li><a href="#group-by" id="toc-group-by" class="nav-link" data-scroll-target="#group-by">GROUP BY</a>
  <ul class="collapse">
  <li><a href="#example-grouping-sales-by-product" id="toc-example-grouping-sales-by-product" class="nav-link" data-scroll-target="#example-grouping-sales-by-product">Example: Grouping Sales by Product</a></li>
  <li><a href="#key-rules-for-group-by" id="toc-key-rules-for-group-by" class="nav-link" data-scroll-target="#key-rules-for-group-by">Key Rules for GROUP BY</a></li>
  <li><a href="#example-grouping-with-sorting-and-limiting" id="toc-example-grouping-with-sorting-and-limiting" class="nav-link" data-scroll-target="#example-grouping-with-sorting-and-limiting">Example: Grouping with Sorting and Limiting</a></li>
  <li><a href="#key-takeaways" id="toc-key-takeaways" class="nav-link" data-scroll-target="#key-takeaways">Key Takeaways</a></li>
  </ul></li>
  <li><a href="#group-by-1" id="toc-group-by-1" class="nav-link" data-scroll-target="#group-by-1">GROUP BY</a>
  <ul class="collapse">
  <li><a href="#group-by-for-discovering-distinct-values" id="toc-group-by-for-discovering-distinct-values" class="nav-link" data-scroll-target="#group-by-for-discovering-distinct-values">GROUP BY for Discovering Distinct Values</a></li>
  <li><a href="#using-group-by-to-summarize-categories" id="toc-using-group-by-to-summarize-categories" class="nav-link" data-scroll-target="#using-group-by-to-summarize-categories">Using GROUP BY to Summarize Categories</a></li>
  <li><a href="#why-this-is-useful" id="toc-why-this-is-useful" class="nav-link" data-scroll-target="#why-this-is-useful">Why This Is Useful</a></li>
  </ul></li>
  <li><a href="#aggregate-functions" id="toc-aggregate-functions" class="nav-link" data-scroll-target="#aggregate-functions">Aggregate Functions</a>
  <ul class="collapse">
  <li><a href="#using-aggregate-functions-with-group-by" id="toc-using-aggregate-functions-with-group-by" class="nav-link" data-scroll-target="#using-aggregate-functions-with-group-by">Using Aggregate Functions with GROUP BY</a></li>
  <li><a href="#example-counting-records-per-group" id="toc-example-counting-records-per-group" class="nav-link" data-scroll-target="#example-counting-records-per-group">Example: Counting Records per Group</a></li>
  <li><a href="#example-aggregating-numeric-values" id="toc-example-aggregating-numeric-values" class="nav-link" data-scroll-target="#example-aggregating-numeric-values">Example: Aggregating Numeric Values</a></li>
  <li><a href="#example-average-price-by-category" id="toc-example-average-price-by-category" class="nav-link" data-scroll-target="#example-average-price-by-category">Example: Average Price by Category</a></li>
  <li><a href="#key-takeaways-1" id="toc-key-takeaways-1" class="nav-link" data-scroll-target="#key-takeaways-1">Key Takeaways</a></li>
  </ul></li>
  <li><a href="#group-by-with-multiple-columns" id="toc-group-by-with-multiple-columns" class="nav-link" data-scroll-target="#group-by-with-multiple-columns">GROUP BY with Multiple Columns</a>
  <ul class="collapse">
  <li><a href="#example-grouping-by-multiple-attributes" id="toc-example-grouping-by-multiple-attributes" class="nav-link" data-scroll-target="#example-grouping-by-multiple-attributes">Example: Grouping by Multiple Attributes</a></li>
  <li><a href="#how-to-read-the-result" id="toc-how-to-read-the-result" class="nav-link" data-scroll-target="#how-to-read-the-result">How to Read the Result</a></li>
  <li><a href="#why-grouping-by-multiple-columns-is-useful" id="toc-why-grouping-by-multiple-columns-is-useful" class="nav-link" data-scroll-target="#why-grouping-by-multiple-columns-is-useful">Why Grouping by Multiple Columns Is Useful</a></li>
  </ul></li>
  <li><a href="#distinct" id="toc-distinct" class="nav-link" data-scroll-target="#distinct">DISTINCT</a>
  <ul class="collapse">
  <li><a href="#basic-distinct-syntax" id="toc-basic-distinct-syntax" class="nav-link" data-scroll-target="#basic-distinct-syntax">Basic DISTINCT Syntax</a></li>
  <li><a href="#example-finding-unique-values" id="toc-example-finding-unique-values" class="nav-link" data-scroll-target="#example-finding-unique-values">Example: Finding Unique Values</a></li>
  <li><a href="#distinct-with-multiple-columns" id="toc-distinct-with-multiple-columns" class="nav-link" data-scroll-target="#distinct-with-multiple-columns">DISTINCT with Multiple Columns</a></li>
  <li><a href="#distinct-vs-group-by" id="toc-distinct-vs-group-by" class="nav-link" data-scroll-target="#distinct-vs-group-by">DISTINCT vs GROUP BY</a></li>
  <li><a href="#when-to-use-distinct" id="toc-when-to-use-distinct" class="nav-link" data-scroll-target="#when-to-use-distinct">When to Use DISTINCT</a></li>
  <li><a href="#practice" id="toc-practice" class="nav-link" data-scroll-target="#practice">Practice</a></li>
  </ul></li>
  <li><a href="#task" id="toc-task" class="nav-link" data-scroll-target="#task">Task</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">


<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../materials/sql/index.html">SQL</a></li><li class="breadcrumb-item"><a href="../../materials/sql/index.html">SQL</a></li><li class="breadcrumb-item"><a href="../../materials/sql/session3.html">SQL Session 02: DRAFT</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">SQL Session 02: DRAFT</h1>
  <div class="quarto-categories">
    <div class="quarto-category">SQL</div>
    <div class="quarto-category">Data Types</div>
    <div class="quarto-category">Schemas</div>
    <div class="quarto-category">Keys</div>
    <div class="quarto-category">Indexes</div>
    <div class="quarto-category">Syntax</div>
  </div>
  </div>



<div class="quarto-title-meta column-body">

    
  
    
  </div>
  


</header>


<section id="behind-the-scenes" class="level2">
<h2 class="anchored" data-anchor-id="behind-the-scenes">Behind the Scenes</h2>
<p>Before diving into more SQL syntax, let’s pause for a moment to consider what happens <strong>behind the scenes</strong> when a SQL query is executed.</p>
<p>To understand why this matters, think about an e-commerce company that sells products online. If management wants to reduce operational costs or improve customer experience, they must analyze and optimize many background processes—inventory management, order fulfillment, payment processing, and delivery.</p>
<p>The same idea applies when running SQL queries. What you write is only part of the story; how the database executes it matters just as much.</p>
<section id="sql-as-a-declarative-language" class="level3">
<h3 class="anchored" data-anchor-id="sql-as-a-declarative-language">SQL as a Declarative Language</h3>
<p>The first key concept to understand is that <strong>SQL is a declarative programming language</strong>.</p>
<p>This means: - You tell the database <strong>what</strong> result you want - You do <strong>not</strong> tell it <strong>how</strong> to get that result</p>
<p>When you write a <code>SELECT</code> statement, you describe the desired output, and the database engine (RDBMS) decides the most efficient way to retrieve the data.</p>
</section>
<section id="example-declarative-query" class="level3">
<h3 class="anchored" data-anchor-id="example-declarative-query">Example: Declarative Query</h3>
<p>Consider the following query:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> product_name</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> products;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This statement tells the database:</p>
<ul>
<li>return all values from the <code>product_name</code> column</li>
<li>read the data from the <code>products</code> table</li>
</ul>
<p>What it <strong>does not</strong> specify: - which indexes to use - how the data should be scanned - whether to read data sequentially or via an index</p>
<p>All of these decisions are handled internally by the database engine.</p>
</section>
<section id="query-optimization-happens-automatically" class="level3">
<h3 class="anchored" data-anchor-id="query-optimization-happens-automatically">Query Optimization Happens Automatically</h3>
<p>When a query is submitted:</p>
<ol type="1">
<li>The database <strong>parses</strong> the SQL statement</li>
<li>It checks syntax and permissions</li>
<li>The <strong>query planner</strong> evaluates multiple execution strategies</li>
<li>The <strong>optimizer</strong> selects the most efficient execution plan</li>
<li>The query is executed and results are returned</li>
</ol>
<p>Because of this process, part of writing efficient SQL queries is <strong>trusting the database</strong> to do its job—while still writing clear, well-structured queries that allow the optimizer to work effectively.</p>
</section>
<section id="why-this-matters-for-data-analysts" class="level3">
<h3 class="anchored" data-anchor-id="why-this-matters-for-data-analysts">Why This Matters for Data Analysts</h3>
<p>As a data analyst, this means:</p>
<ul>
<li>You focus on <strong>business logic and correctness</strong></li>
<li>The database focuses on <strong>performance and execution</strong></li>
<li>Clean SQL enables better optimization</li>
<li>Proper indexes and constraints support faster queries</li>
</ul>
<p>Understanding what happens behind the scenes will help you: - interpret slow queries - write more efficient SQL - collaborate more effectively with data engineers and DBAs</p>
<p>This foundation becomes especially important as datasets grow larger and queries become more complex.</p>
<p>Don’t worry if this query plan looks confusing right now. You don’t need to understand every last detail. In fact, the only element you need to take note of is the cost. Now, this “cost” doesn’t refer to the actual cost of running the query, rather it’s an arbitrary unit that’s used to indicate the estimated run time of the query. The “cost,” or time, of returning the first row is 0, but the cost of returning all the rows is 64. Since the cost unit doesn’t refer to a specific second or minute, all this tells us is that a query with a cost of 64 will take longer than a query with a cost of 30.</p>
</section>
</section>
<section id="query-plan" class="level2">
<h2 class="anchored" data-anchor-id="query-plan">Query Plan</h2>
<p>As you become more familiar with SQL, you will start combining multiple SQL commands into <strong>scripts</strong>.<br>
When working with large databases—often containing millions or billions of records—it becomes essential to consider the <strong>time and cost</strong> of running those scripts.</p>
<p>For example, imagine working with a large transactional system that stores <strong>sales</strong> and <strong>product</strong> data.<br>
Running a poorly optimized query on a frequently accessed table could significantly slow down reports and increase infrastructure costs. That’s why queries that run often should be optimized <strong>before</strong> being deployed.</p>
<p>Faster queries mean: - lower computational cost - better system performance - quicker insights for decision-makers</p>
<section id="what-is-a-query-plan" class="level3">
<h3 class="anchored" data-anchor-id="what-is-a-query-plan">What Is a Query Plan?</h3>
<p>A <strong>query plan</strong> shows how the database intends to execute a SQL query.</p>
<p>Most relational database management systems (RDBMS), including PostgreSQL, can estimate: - how long a query will take - how many rows will be processed - which operations will be performed (scans, joins, filters)</p>
<p>To generate a query plan, you simply add the keyword <code>EXPLAIN</code> before your SQL query.</p>
</section>
<section id="generating-a-query-plan" class="level3">
<h3 class="anchored" data-anchor-id="generating-a-query-plan">Generating a Query Plan</h3>
<p>Suppose you want to retrieve all records from a <code>sales</code> table and understand how expensive this operation might be.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">EXPLAIN</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> sales;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>When this query is executed, PostgreSQL does <strong>not</strong> return the data itself.<br>
Instead, it returns a <strong>query plan</strong> describing how the data would be retrieved.</p>
</section>
<section id="interpreting-a-simple-query-plan" class="level3">
<h3 class="anchored" data-anchor-id="interpreting-a-simple-query-plan">Interpreting a Simple Query Plan</h3>
<p>A basic query plan might look like this:</p>
<pre class="text"><code>Seq Scan on sales  (cost=0.00..85.40 rows=2500 width=96)</code></pre>
<p>This output tells us:</p>
<ul>
<li><strong>Seq Scan</strong>: PostgreSQL is performing a sequential scan, reading every row in the table</li>
<li><strong>sales</strong>: the table being scanned</li>
<li><strong>cost</strong>: an internal estimate of startup and total execution cost</li>
<li><strong>rows</strong>: estimated number of rows returned</li>
<li><strong>width</strong>: average size of each row in bytes</li>
</ul>
<p>A sequential scan is common when: - the table is relatively small - no suitable index exists - most rows are expected to be returned</p>
</section>
<section id="why-query-plans-matter-for-data-analysts" class="level3">
<h3 class="anchored" data-anchor-id="why-query-plans-matter-for-data-analysts">Why Query Plans Matter for Data Analysts</h3>
<p>Understanding query plans helps you:</p>
<ul>
<li>diagnose slow queries</li>
<li>decide when indexes are needed</li>
<li>write more efficient SQL</li>
<li>communicate performance issues to data engineers or DBAs</li>
</ul>
<p>As datasets grow, even simple queries can become expensive.<br>
Learning to read and reason about query plans is a key step toward writing <strong>production-ready SQL</strong>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Query optimization is a huge topic, most of which goes beyond the scope of this Achievement and the role of a data analyst. Just know that writing optimized queries is a good habit to get into, especially queries that will be executed frequently.</p>
<p>If you’d like to read more about query optimization, this tutorial is a good place to start: SQL Tuning or Query Optimization</p>
</div>
</div>
</section>
</section>
<section id="refining-your-sql-queries" class="level2">
<h2 class="anchored" data-anchor-id="refining-your-sql-queries">Refining Your SQL Queries</h2>
<p>You’ve learned that reducing the <strong>cost of your queries</strong> is important.<br>
But how do you actually optimize SQL queries in practice?</p>
<p>One of the simplest and most effective ways is to be <strong>precise about what data you request</strong>.<br>
Before introducing additional commands, it’s worth revisiting <code>SELECT</code>, because it is the foundation of almost every analytical query.</p>
<section id="revisiting-select" class="level3">
<h3 class="anchored" data-anchor-id="revisiting-select">Revisiting SELECT</h3>
<p>As you already know, <code>SELECT</code> allows you to retrieve data from a database.</p>
<p>A <code>SELECT</code> statement usually follows this structure:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb4"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> column_name_1,</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>       column_name_2</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> table_name;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>If you want to retrieve multiple columns, you list them separated by commas.</p>
</section>
<section id="example-selecting-specific-columns" class="level3">
<h3 class="anchored" data-anchor-id="example-selecting-specific-columns">Example: Selecting Specific Columns</h3>
<p>Consider a transactional database that contains a <code>products</code> table.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb5"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> product_name,</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>       price,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>       <span class="kw">category</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> products;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This query tells the database to:</p>
<ul>
<li>return the <code>product_name</code></li>
<li>return the <code>price</code></li>
<li>return the <code>category</code></li>
<li>read the data from the <code>products</code> table</li>
</ul>
<p>Only these three columns will be included in the result set.</p>
</section>
<section id="why-column-selection-matters" class="level3">
<h3 class="anchored" data-anchor-id="why-column-selection-matters">Why Column Selection Matters</h3>
<p>Selecting only the columns you actually need:</p>
<ul>
<li>reduces the amount of data transferred</li>
<li>improves query performance</li>
<li>makes results easier to read and interpret</li>
</ul>
<p>Compare the following two queries:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb6"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> products;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> product_name, price</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> products;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>The second query is usually preferable when you only need product names and prices.</p>
</section>
<section id="whats-next" class="level3">
<h3 class="anchored" data-anchor-id="whats-next">What’s Next?</h3>
<p>In the next sections, you’ll learn how to further refine <code>SELECT</code> statements by:</p>
<ul>
<li>sorting results</li>
<li>filtering rows</li>
<li>grouping data</li>
<li>limiting output size</li>
<li>partitioning results for analysis</li>
</ul>
<p>As always, practice running these queries in PostgreSQL as you learn them—hands-on experience is the fastest way to build strong SQL intuition.</p>
</section>
</section>
<section id="order-by" class="level2">
<h2 class="anchored" data-anchor-id="order-by">ORDER BY</h2>
<p>The <code>ORDER BY</code> clause sorts query results in <strong>ascending</strong> or <strong>descending</strong> order.<br>
It is commonly used when you want to view:</p>
<ul>
<li>the first or last records</li>
<li>highest or lowest values</li>
<li>alphabetically ordered text data</li>
</ul>
<section id="basic-order-by-syntax" class="level3">
<h3 class="anchored" data-anchor-id="basic-order-by-syntax">Basic ORDER BY Syntax</h3>
<p>By default, <code>ORDER BY</code> sorts results in <strong>ascending order</strong>.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> column_name</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> table_name</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> column_name;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>You can explicitly control the sorting direction using: - <code>ASC</code> for ascending order - <code>DESC</code> for descending order</p>
</section>
<section id="example-sorting-text-data" class="level3">
<h3 class="anchored" data-anchor-id="example-sorting-text-data">Example: Sorting Text Data</h3>
<p>Suppose you want to view products sorted by name in <strong>descending alphabetical order</strong> (Z → A).</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  product_name,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">category</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> products</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> product_name <span class="kw">DESC</span>;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This query returns: - <code>product_name</code> - <code>category</code></p>
<p>sorted from <strong>Z to A</strong>, because <code>product_name</code> is a text (character) column.</p>
</section>
<section id="example-sorting-numeric-data" class="level3">
<h3 class="anchored" data-anchor-id="example-sorting-numeric-data">Example: Sorting Numeric Data</h3>
<p>If you sort a numeric column in descending order, results are ordered from <strong>largest to smallest</strong>.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  product_name,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  price</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> products</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> price <span class="kw">DESC</span>;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This query returns the most expensive products first.</p>
</section>
<section id="sorting-by-multiple-columns" class="level3">
<h3 class="anchored" data-anchor-id="sorting-by-multiple-columns">Sorting by Multiple Columns</h3>
<p>You can sort by more than one column.<br>
The database applies sorting <strong>from left to right</strong>.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  product_name,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">category</span>,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  price</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> products</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> <span class="kw">category</span> <span class="kw">ASC</span>, price <span class="kw">DESC</span>;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This means: 1. Products are grouped by <code>category</code> (A → Z) 2. Within each category, products are sorted by <code>price</code> (high → low)</p>
</section>
<section id="key-points-to-remember" class="level3">
<h3 class="anchored" data-anchor-id="key-points-to-remember">Key Points to Remember</h3>
<ul>
<li><code>ORDER BY</code> is applied <strong>after</strong> <code>SELECT</code> and <code>FROM</code></li>
<li>Default sort order is <strong>ascending</strong></li>
<li>Use <code>DESC</code> for reverse ordering</li>
<li>Text columns are sorted alphabetically</li>
<li>Numeric columns are sorted by value</li>
<li>Multiple columns can be combined for fine-grained control</li>
</ul>
</section>
</section>
<section id="limit" class="level2">
<h2 class="anchored" data-anchor-id="limit">LIMIT</h2>
<p>The <code>LIMIT</code> clause restricts the <strong>number of rows</strong> returned by a query.</p>
<p>It is useful when: - you only need a small sample of the data - you want to preview results - you want to reduce query cost and execution time</p>
<section id="basic-limit-syntax" class="level3">
<h3 class="anchored" data-anchor-id="basic-limit-syntax">Basic LIMIT Syntax</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> column_name</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> table_name</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> number_of_rows;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>The value provided to <code>LIMIT</code> must always be a <strong>number</strong>.</p>
</section>
<section id="example-limiting-sorted-results" class="level3">
<h3 class="anchored" data-anchor-id="example-limiting-sorted-results">Example: Limiting Sorted Results</h3>
<p>Suppose you want to retrieve product names and prices, sorted by price from highest to lowest, but you only care about the <strong>top 10 most expensive products</strong>.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  product_name,</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  price</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> products</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> price <span class="kw">DESC</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">10</span>;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This query: - sorts products by price in descending order - returns only the first 10 rows</p>
<p>Using <code>LIMIT</code> in this way saves time and computational resources, especially when working with large tables.</p>
</section>
<section id="important-notes-about-limit" class="level3">
<h3 class="anchored" data-anchor-id="important-notes-about-limit">Important Notes About LIMIT</h3>
<ul>
<li><code>LIMIT</code> is always written <strong>at the end</strong> of a query</li>
<li>it must be placed after <code>ORDER BY</code> (if present)</li>
<li>the value must be numeric</li>
</ul>
<p>If <code>LIMIT</code> is placed elsewhere in the query, PostgreSQL will return an error.</p>
</section>
<section id="database-compatibility-note" class="level3">
<h3 class="anchored" data-anchor-id="database-compatibility-note">Database Compatibility Note</h3>
<p>Not all SQL databases use <code>LIMIT</code>.</p>
<ul>
<li>PostgreSQL, MySQL, SQLite → <code>LIMIT</code></li>
<li>SQL Server → <code>TOP</code></li>
</ul>
<hr>
</section>
</section>
<section id="group-by" class="level2">
<h2 class="anchored" data-anchor-id="group-by">GROUP BY</h2>
<p>The <code>GROUP BY</code> clause allows you to <strong>group rows that share the same values</strong> in one or more columns.</p>
<p>It is commonly used together with <strong>aggregate functions</strong> to summarize data.</p>
<p>Typical aggregate functions include: - <code>COUNT()</code> - <code>SUM()</code> - <code>AVG()</code> - <code>MIN()</code> - <code>MAX()</code></p>
<section id="example-grouping-sales-by-product" class="level3">
<h3 class="anchored" data-anchor-id="example-grouping-sales-by-product">Example: Grouping Sales by Product</h3>
<p>Suppose you want to calculate total sales per product.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  product_id,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">SUM</span>(total_sales) <span class="kw">AS</span> total_revenue</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> sales</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> product_id;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This query: - groups rows by <code>product_id</code> - calculates total revenue per product - returns one row per product</p>
</section>
<section id="key-rules-for-group-by" class="level3">
<h3 class="anchored" data-anchor-id="key-rules-for-group-by">Key Rules for GROUP BY</h3>
<ul>
<li>Every column in <code>SELECT</code> must either:
<ul>
<li>appear in the <code>GROUP BY</code> clause, or</li>
<li>be wrapped in an aggregate function</li>
</ul></li>
<li><code>GROUP BY</code> is evaluated <strong>after</strong> <code>WHERE</code> and <strong>before</strong> <code>ORDER BY</code></li>
</ul>
</section>
<section id="example-grouping-with-sorting-and-limiting" class="level3">
<h3 class="anchored" data-anchor-id="example-grouping-with-sorting-and-limiting">Example: Grouping with Sorting and Limiting</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  product_id,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">SUM</span>(total_sales) <span class="kw">AS</span> total_revenue</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> sales</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> product_id</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span> total_revenue <span class="kw">DESC</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="kw">LIMIT</span> <span class="dv">5</span>;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This query returns the <strong>top 5 products by total revenue</strong>.</p>
</section>
<section id="key-takeaways" class="level3">
<h3 class="anchored" data-anchor-id="key-takeaways">Key Takeaways</h3>
<ul>
<li><code>LIMIT</code> controls <strong>how many rows</strong> are returned</li>
<li><code>GROUP BY</code> controls <strong>how rows are aggregated</strong></li>
<li>Both are essential tools for efficient, scalable data analysis</li>
<li>They are often used together in real-world analytical queries</li>
</ul>
</section>
</section>
<section id="group-by-1" class="level2">
<h2 class="anchored" data-anchor-id="group-by-1">GROUP BY</h2>
<p>The <code>GROUP BY</code> clause allows you to <strong>group rows that share the same values</strong> in a column to produce a <strong>summary</strong>.</p>
<p>It is most commonly used together with <strong>aggregate functions</strong> such as: - <code>COUNT()</code> - <code>SUM()</code> - <code>AVG()</code> - <code>MIN()</code> - <code>MAX()</code></p>
<section id="group-by-for-discovering-distinct-values" class="level3">
<h3 class="anchored" data-anchor-id="group-by-for-discovering-distinct-values">GROUP BY for Discovering Distinct Values</h3>
<p><code>GROUP BY</code> can also be used to identify <strong>distinct values</strong> in a column.<br>
This is useful when you want to understand how data is organized without seeing every individual row.</p>
<p>To see all product categories in the database, you could start with:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">category</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> products;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This query returns the category for <strong>every product</strong>, which may include many duplicates.</p>
</section>
<section id="using-group-by-to-summarize-categories" class="level3">
<h3 class="anchored" data-anchor-id="using-group-by-to-summarize-categories">Using GROUP BY to Summarize Categories</h3>
<p>If you only want to know <strong>which categories exist</strong>, <code>GROUP BY</code> is the right tool.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">category</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> products</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> <span class="kw">category</span>;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This query: - groups rows by <code>category</code> - returns one row per unique category - removes duplicate category values from the output</p>
<p>The result is a concise summary of the different product categories stored in the database.</p>
</section>
<section id="why-this-is-useful" class="level3">
<h3 class="anchored" data-anchor-id="why-this-is-useful">Why This Is Useful</h3>
<p>Using <code>GROUP BY</code> in this way helps you: - explore the structure of a dataset - validate categorical columns - prepare data for aggregation and reporting</p>
<p>In practice, <code>GROUP BY</code> becomes even more powerful when combined with aggregate functions, which you’ll explore next.</p>
</section>
</section>
<section id="aggregate-functions" class="level2">
<h2 class="anchored" data-anchor-id="aggregate-functions">Aggregate Functions</h2>
<p>Similar to Excel, SQL provides several <strong>aggregate functions</strong> that allow you to perform calculations across multiple rows of data.</p>
<p>Below is a list of commonly used aggregate functions.<br>
Note that <code>SUM</code> and <code>AVG</code> can only be applied to <strong>numeric columns</strong>.</p>
<ul>
<li><code>COUNT()</code> counts the number of rows</li>
<li><code>MAX()</code> finds the maximum value in a column</li>
<li><code>MIN()</code> finds the minimum value in a column</li>
<li><code>SUM()</code> adds up all numeric values in a column</li>
<li><code>AVG()</code> calculates the average of numeric values in a column</li>
</ul>
<section id="using-aggregate-functions-with-group-by" class="level3">
<h3 class="anchored" data-anchor-id="using-aggregate-functions-with-group-by">Using Aggregate Functions with GROUP BY</h3>
<p>Aggregate functions are most powerful when combined with <code>GROUP BY</code>, which allows you to summarize data across categories.</p>
<p>Suppose you are working with a sales database and want to understand <strong>how many sales transactions exist per product</strong>.</p>
<p>To begin, recall that the <code>sales</code> table may contain many rows per product.</p>
</section>
<section id="example-counting-records-per-group" class="level3">
<h3 class="anchored" data-anchor-id="example-counting-records-per-group">Example: Counting Records per Group</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  product_id,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">COUNT</span>(transaction_id) <span class="kw">AS</span> number_of_transactions</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> sales</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> product_id;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This query: - groups rows by <code>product_id</code> - counts how many transactions exist for each product - returns one row per product</p>
</section>
<section id="example-aggregating-numeric-values" class="level3">
<h3 class="anchored" data-anchor-id="example-aggregating-numeric-values">Example: Aggregating Numeric Values</h3>
<p>You can also summarize numeric columns such as total revenue.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  product_id,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">SUM</span>(total_sales) <span class="kw">AS</span> total_revenue</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> sales</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> product_id;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Here: - <code>SUM(total_sales)</code> adds up all sales values per product - the result shows total revenue generated by each product</p>
</section>
<section id="example-average-price-by-category" class="level3">
<h3 class="anchored" data-anchor-id="example-average-price-by-category">Example: Average Price by Category</h3>
<p>Aggregate functions are often used for higher-level analysis.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">category</span>,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">AVG</span>(price) <span class="kw">AS</span> average_price</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> products</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> <span class="kw">category</span>;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This query: - groups products by category - calculates the average price within each category</p>
</section>
<section id="key-takeaways-1" class="level3">
<h3 class="anchored" data-anchor-id="key-takeaways-1">Key Takeaways</h3>
<ul>
<li>Aggregate functions summarize data across multiple rows</li>
<li><code>GROUP BY</code> defines <strong>how</strong> rows are grouped</li>
<li>Every non-aggregated column in <code>SELECT</code> must appear in <code>GROUP BY</code></li>
<li>These functions are essential for reporting, dashboards, and business insights</li>
</ul>
</section>
</section>
<section id="group-by-with-multiple-columns" class="level2">
<h2 class="anchored" data-anchor-id="group-by-with-multiple-columns">GROUP BY with Multiple Columns</h2>
<p>You can also group data by <strong>multiple columns</strong>.<br>
To do this, simply list <strong>all grouping columns</strong> after <code>GROUP BY</code>, separated by commas.</p>
<p>This allows you to create more granular summaries by combining multiple dimensions.</p>
<section id="example-grouping-by-multiple-attributes" class="level3">
<h3 class="anchored" data-anchor-id="example-grouping-by-multiple-attributes">Example: Grouping by Multiple Attributes</h3>
<p>Suppose you want to understand <strong>how many sales transactions exist for each product and sales channel combination</strong>.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  product_id,</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  sales_channel,</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">COUNT</span>(transaction_id) <span class="kw">AS</span> transaction_count</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> sales</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> product_id, sales_channel;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This query: - groups records by both <code>product_id</code> and <code>sales_channel</code> - counts the number of transactions in each combination - returns one row per unique <code>(product_id, sales_channel)</code> pair</p>
</section>
<section id="how-to-read-the-result" class="level3">
<h3 class="anchored" data-anchor-id="how-to-read-the-result">How to Read the Result</h3>
<p>The output represents: - one row per product and channel combination - the total number of transactions for that specific combination</p>
<p>For example: - Product A sold online - Product A sold in-store<br>
are treated as <strong>two separate groups</strong>.</p>
</section>
<section id="why-grouping-by-multiple-columns-is-useful" class="level3">
<h3 class="anchored" data-anchor-id="why-grouping-by-multiple-columns-is-useful">Why Grouping by Multiple Columns Is Useful</h3>
<p>Grouping by multiple columns helps you: - analyze performance across multiple dimensions - break down metrics by category, region, channel, or time - build detailed summaries for dashboards and reports</p>
<p>You will get more practice using multi-column <code>GROUP BY</code> as you move into data summarization, aggregation, and data cleaning tasks later in the course.</p>
</section>
</section>
<section id="distinct" class="level2">
<h2 class="anchored" data-anchor-id="distinct">DISTINCT</h2>
<p>You’ll get more practice using aggregate functions later in this course, when you learn about summarizing and cleaning data.</p>
<p>The <code>DISTINCT</code> keyword is used to return <strong>unique values</strong> from a column or a combination of columns.<br>
It is especially useful when a dataset contains duplicate values and you want to understand the <strong>unique categories or combinations</strong> present in the data.</p>
<section id="basic-distinct-syntax" class="level3">
<h3 class="anchored" data-anchor-id="basic-distinct-syntax">Basic DISTINCT Syntax</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> column_name</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> table_name;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="example-finding-unique-values" class="level3">
<h3 class="anchored" data-anchor-id="example-finding-unique-values">Example: Finding Unique Values</h3>
<p>Suppose you want to see all unique product categories in the <code>products</code> table.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span> <span class="kw">category</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> products;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This query returns one row per unique category, even if multiple products belong to the same category.</p>
</section>
<section id="distinct-with-multiple-columns" class="level3">
<h3 class="anchored" data-anchor-id="distinct-with-multiple-columns">DISTINCT with Multiple Columns</h3>
<p><code>DISTINCT</code> can also be applied to <strong>multiple columns</strong> to find unique combinations.</p>
<p>For example, to find unique combinations of product category and price:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">category</span>,</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  price</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> products;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>This returns each unique <code>(category, price)</code> pair found in the table.</p>
</section>
<section id="distinct-vs-group-by" class="level3">
<h3 class="anchored" data-anchor-id="distinct-vs-group-by">DISTINCT vs GROUP BY</h3>
<p>In many cases, <code>DISTINCT</code> and <code>GROUP BY</code> can produce the same result when no aggregate functions are used.</p>
<p>Using <code>DISTINCT</code>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">category</span>,</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  price</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> products;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Using <code>GROUP BY</code>:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">category</span>,</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  price</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> products</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="kw">GROUP</span> <span class="kw">BY</span> <span class="kw">category</span>, price;</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Both queries return the unique combinations of <code>category</code> and <code>price</code>.</p>
</section>
<section id="when-to-use-distinct" class="level3">
<h3 class="anchored" data-anchor-id="when-to-use-distinct">When to Use DISTINCT</h3>
<p>Use <code>DISTINCT</code> when: - you only need unique values - no aggregation is required - you want simpler, more readable SQL</p>
<p>Use <code>GROUP BY</code> when: - you need aggregate functions - you want more control over grouping logic</p>
</section>
<section id="practice" class="level3">
<h3 class="anchored" data-anchor-id="practice">Practice</h3>
<p>Which command do you think is faster: <code>GROUP BY</code> or <code>DISTINCT</code>?</p>
<p>Use <code>EXPLAIN</code> to generate query plans for both queries and compare their estimated costs to see which one runs more efficiently in PostgreSQL.</p>
</section>
</section>
<section id="task" class="level2">
<h2 class="anchored" data-anchor-id="task">Task</h2>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    // Ensure there is a toggle, if there isn't float one in the top right
    if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
      const a = window.document.createElement('a');
      a.classList.add('top-right');
      a.classList.add('quarto-color-scheme-toggle');
      a.href = "";
      a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
      const i = window.document.createElement("i");
      i.classList.add('bi');
      a.appendChild(i);
      window.document.body.appendChild(a);
    }
    setColorSchemeToggle(hasAlternateSentinel())
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/hovhannisyan91\.github\.io\/aca");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>